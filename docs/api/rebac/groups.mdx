---
sidebar_position: 7
title: Groups API
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

The Groups API simplifies permission management for your resources and users by using groups. Groups can include resources, resource instances, and users, enabling you to set permissions for everything contained within a group at once.

## Key Features:

- **Create, Update, Delete, and List Groups:** The Groups API provides a comprehensive set of endpoints to manage the lifecycle of your groups, ensuring you have complete control over their configuration and membership.
- **User Membership:** When adding users to the group through the API, you can set them to automatically derive their permissions from the roles assigned to the group, ensuring consistent and manageable access control. See the [Groups Redoc](https://www.notion.so/) for more information.
- **Group Resources, Resource Instances, and Users:** Organize your resources and users into groups, allowing for simplified ReBAC permissions for:

    - **Users:** Creating a group of users allows you to assign an entire cluster of users with a single role (Instead of assigning roles to each user individually). You can set a role assigned to the group to be automatically assigned to all its members and revoked once their membership is removed. 
    
    :::info Example:
    If we create a `marketing` group and assign a `marketing-team-member` role to it, we can give an entire group of users access to a shared marketing resource.
    :::
    
    - **Resources:** Grouping resources enables you to manage access control for multiple resources simultaneously, ensuring all included resources share the same permission configuration.
    
    :::info Example:
    If we create a `marketing-resources` group, we can assign a role to a user (Or group of users!) that gives them permission to perform certain actions on all resources within the `marketing-resources` group.
    :::

    - **Resource Instances:** Grouping resource instances allows you to manage permissions for a group of specific resource instances collectively. As with resource groups, this ensures all resource instances within the group share the same permission configuration.
        
    :::info Example: 
    If we create a `social-media-campaigns` group and populate it with the instances of our social media campaigns (`campaign-1`, `campaign-2`), we can assign a user (Or group of users) a role that gives them access to perform specific actions on this group of resource instances. 
    :::
        

## Example Usage for User Groups

Let's say we want to assign a group of users, the "Marketing Team," access to a group of social media resources. 

- Using the Groups API, we'll first create a group named `marketing-team`.
- Next, we will assign users to the `marketing-team` group.
- The group will be assigned a `member` role.

- Additionally, we will have a resource group called `social-media` .
- Next, we will assign resources to the `social-media` group.
- The `social-media` group will support the role `viewer`.

Once we assign the `viewer` role to the `marketing-team` group, the following will be automated by the API: 

- Create a role derivation from `marketing-team#member` to `social-media#viewer`.
- Establish a relation between `marketing-team` and `social-media` .
- Create a relationship between `marketing-team` and each resource within the `social-media` group.

After these steps, we will have the `marketing-team` group, and every user who is a `member` in this group will have the role `viewer` in all resources within the `social-media` group. 

### Assign Users to a Group

When you assign `user-1` to the `marketing-team` group, the following will be automated by the API:

- Assign `user-1` to the `marketing-team#member` role.
- Grant `user-1` the role `social-media#viewer` in all resources within the `social-media` group.

Using the Groups API, you can efficiently manage permissions and ensure that all members of the `marketing team` have the appropriate access to the `social media` resources group.

## Create a Group via API

To create a new group, make a POST request to the following with the required data:

```bash
curl '<https://api.permit.io/v2/facts/{project_id}/{env_id}/groups>' \\
  -H 'authorization: Bearer API_SECRET_KEY'
  --data-raw '{"group_instance_key": "marketing-team"}' \\
```

To add a new role to group, make a POST request to the following with the required data:

```bash
curl '<https://api.permit.io/v2/facts/{project_id}/{env_id}/group/{group_resource_type_key}/roles>' \\
  -H 'authorization: Bearer API_SECRET_KEY'
  --data-raw '{"resource": "marketing", "resource_instance": "social_media", "role": "viewer", tenant:"business"}' \\

```

To add users to a group, make a PUT request to the following with the required data:

```
curl -X PUT \\
'<https://api.permit.io/v2/facts/{project_id}/{env_id}/groups/{group_resource_type_key}/users/{user_id}>' \\
    -H 'authorization
      --data-raw '{"tenant":"business"}' \\
```