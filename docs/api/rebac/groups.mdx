---
sidebar_position: 7
title: Groups API
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

The Groups API simplifies permission management for your resources and users by using groups. These can be used to group together resources, resource instances, and users, enabling you to set a unified permission scheme for everything contained within a group.

## Key Features:

- **Create, Update, Delete, and List Groups:** The Groups API provides a comprehensive set of endpoints to manage the lifecycle of your groups, ensuring you have complete control over their configuration and membership.
- **User Membership:** When adding users to the group through the API, you can set them to automatically derive their permissions from the roles **assigned to the group**, ensuring consistent and manageable access control. See the [Groups Redoc](https://api.permit.io/v2/redoc#tag/Groups-(Upcoming-Feature)) for more information.
- **Group Resources, Resource Instances, and Users:** Organize your resources and users into groups, allowing for simplified ReBAC permissions for:

    - **Users:** Including users in a group allows you to assign an entire cluster of users with a single role (Instead of assigning roles to each user individually). You can set a role assigned to the group to be automatically assigned to all its members and revoked once their membership is removed. 
    
    :::info Example:
    If we create a `marketing` group and assign a `marketing-member` role to it, we then assign users to the Group via the `member` role. We can then derive other roles based on this assignment (See example below)
    :::
    
    - **Resources and Resource Instances:** Grouping resources enables you to manage access control for multiple resources simultaneously, ensuring all included resources share the same permission configuration.
    
    :::info Example:
    In our we `marketing` group, we can create another group titled `social_media`. This group will contain resource instances of marketing materials. We can assign this newly created group the role of `editor`. 
    The Groups API allows you to create a derivation between the `social_media#editor` role and the `marketing#member` role - meaning all users with the `marketing#member` role will automatically be assigned with the `social_media#editor` role. 
    New resources added to `social_media` will be accessible to edit by members of the marketing group, and new users added as members to the `marketing` group will automacically have `editor` access to social media assets. 
    :::
        

## Example Usage for User Groups

Let's get into the previous example with more detail: 

Say we want to assign a group of users, the "Marketing Team," "Editor" access to a group of social media resources. We also want them to have "Viewer" access to an external "Training Video" resource.

### Group creation and role assignment:

- Using the Groups API, we'll first create a group named `marketing`.
- Next, we assign the group with three roles: `editor`, `viewer` and `member`.
- Then, we create another group called `social_media` . This group has one role: `parent`.

### Next, we set up our relationships: 

- We assign our users with the `marketing#member` role. 
- We assign the we assign the `social_media` group with the â‰ˆ role. 
- We assign social media resource instances (meme_1, video_2, calendar_3) the `social-media#parent`. 
- Last, we set our external resource - `training_video` to support the `marketing#viewer` role. 

Once our roles are assigned, the following will be automated by the API: 

- Create a role derivation from `marketing#member` to `social_media#editor`.
- Create a role derivation from `marketing#member` to `training_video#viewer`.
- Create a role derivation from `social_media#editor` to `social-media#parent`.

- Establish a relation between `marketing` and `social-media`.
- Create a relationship between `marketing` and each resource within the `social-media` group.

After these steps, we will have the `marketing` group, and every user who is a `member` in this group will have the role `editor` in all resources within the `social-media` group, and the role `viewer` on `training_video`.

### Assign Users to a Group

When you assign `user-1` to the `marketing` group, the following will be automated by the API:

- Assign `user-1` to the `marketing#member` role.
- Grant `user-1` the role `social_media#viewer` in all resources within the `social_media` group.

Using the Groups API, you can efficiently manage permissions and ensure that all members of the `marketing team` have the appropriate access to the `social media` resources group.

## Create a Group via API

To create a new group, make a POST request to the following with the required data:

```bash
curl '<https://api.permit.io/v2/facts/{project_id}/{env_id}/groups>' \\
  -H 'authorization: Bearer API_SECRET_KEY'
  --data-raw '{"group_instance_key": "marketing-team"}' \\
```

To add a new role to group, make a POST request to the following with the required data:

```bash
curl '<https://api.permit.io/v2/facts/{project_id}/{env_id}/group/{group_resource_type_key}/roles>' \\
  -H 'authorization: Bearer API_SECRET_KEY'
  --data-raw '{"resource": "marketing", "resource_instance": "social_media", "role": "viewer", tenant:"business"}' \\

```

To add users to a group, make a PUT request to the following with the required data:

```
curl -X PUT \\
'<https://api.permit.io/v2/facts/{project_id}/{env_id}/groups/{group_resource_type_key}/users/{user_id}>' \\
    -H 'authorization
      --data-raw '{"tenant":"business"}' \\
```